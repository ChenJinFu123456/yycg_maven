数据库登录方式
user:yycg
pwd:yycg

用户登录 所有用户密码：111111
用户表：sysuser
用户查询：
select * from sysuser where groupid = '1';

医药采购系统
角色：
0-系统管理员
1-市卫生局
2-乡镇卫生院
3-村卫生室
4-供应商

数据库表结构

用户授权

系统异常处理

问题汇总：
1.请描述一下这个系统
	系统概述：
	系统背景，系统概述
	本系统是一个市级医药采购系统，由市卫生局指导开发，通过本系统实现医院上网采购药品，供应商上网销售供应药品，监管单位网上监管
	达到目的：药品交易的自动化，网络化，透明化
	
	系统模块包括：
	本系统包括：药品目录模块，采购单模块，退货单模块，结算单模块，统计分析模块，系统管理
	1.描述一下这个系统？
	系统业务流程
	核心业务流程是医院采购系统：
	第一步：医院创建采购单
					填写采购单基本信息
					填写采购单明细信息
					提交采购单
	第二步：监管单位审核采购单
					监管单位查看采购单详细信息
					如果有问题，给出审核意见，审核不通过
					如果正常，审核通过
	第三步：采购单审核通过后由供货商供货
					手动在页面选择要发货的药品执行发货
					线下整理一个发货清单，进行批量发货
	第四步：医院收到药品进行入库
					医院收到药品后填写入库信息，执行入库操作

2.说说系统架构？
	本系统采用Maven构建
	如何构建：
	将系统分成4个子工程
	（1）技术架构模块：springmybatis 包括：spring3.1.4(包括springmvc)，mybatis3.2.3及依赖的jar包
	（2）工具类模块：yycgutil 包括系统用到的所有工具类
	（3）主工程模块：包括系统基础模块（base），系统业务模块（business）
	（4）聚合模块（父工程模块）：对各子模块进行聚合
	扩展问题:
	为什么要聚合？
	有Maven自动识别各个子模块之间的依赖关系，最终打成一个war包，将war包拷到集成测试环境，方便系统集成测试
	
	公司是如何使用Maven仓库的？
	在公司局域网中单独有一台服务器，作为Maven私服（里面有从互联网上下载下来的jar包和自己上传的jar包），在互联网上下载不到的jar包，要将本地的jar导入到仓库中。参考：向Maven本地仓库导入jar包.docx

3.本系统是如何用Maven开发的？
	技术架构模块：springmybatis 包括：spring3.1.4(包括springmvc)，mybatis3.2.3及依赖的jar包
	主工程模块：包括系统基础模块（base），包括系统管理相关的功能，用户管理，数字字典配置，系统参数配置等
							系统业务模块（business），包括药品模块，采购单模块，统计分析模块等
	工具类模块：yycgutil 包括系统用到的所有工具类
	聚合模块（父工程模块）：对各子模块进行聚合
	
	仓库：在公司局域网中单独有一台服务器，作为Maven私服（里面有从互联网上下载下来的jar包和自己上传的jar包），在互联网上下载不到的jar包，要将本地的jar导入到仓库中。

4.这个系统异常处理是怎么做的？

5.本系统实现或计划了吗？是怎么做的？

6.这个系统Mybatis是怎么用的？或这个系统持久层如何实现的？
	本系统使用Mybatis提供的动态代理方法开发mapper。
	
	逆向工程:针对单标的增删改查，使用mybatis提供的逆向工程生成mapper文件，不用程序员针对单表写sql及mapper文件，提高开发效率
					 针对对表的增删改查，需要自定义mapper

	扩展问题：
	mybatis提供的动态代理方法是怎么用的？
	开发mapper遵循的规则：
	Mapper接口的地址和mapper.xml映射文件中的namespace一致
	Mapper接口的名称和mapper.xml映射文件中的statement的id一致
	Mapper接口的输入参数类型和mapper.xml映射文件中的satatment的parametertype一致
	Mapper接口的输出结果类型和mapper.xml映射文件中的satatment的resulttype一致


7.这个系统springMVC是这么用的？

8.本系统ajax+json是怎么做的？

9.这个系统都用到jquery easy ui 的哪些？

10.这个系统的用户认证是怎么实现的？
	使用用户名和密码认证
	认证流程：
	用户请求action，判断用户是否已登录，登录则执行action，未登录判断是否访问公开地址，若是则执行action,不是公开地址，则跳转登录页面

11.这个系统的用户授权是怎么实现的？
	用户授权（用户权限分配）：
	用户角色、系统模块（一级菜单和二级菜单）、系统操作（点击菜单，进入页面中所有的url链接）、角色操作表。
	
	给用户授权范围：
	将用户可操作的菜单页面中所有的链接给用户授权，用户点击菜单进入页面，可操作页面中每个链接，如果不给用户授权该菜单，该菜单上的所有地址，用户无法访问。
	
	本系统采用url拦截方式授权：
	用户请求url（action）地址，通过拦截器校验用户是否有权限，如果没有操作权限，则提示“误操作权限”
	
	参考用户认证拦截流程：
	使用过滤器、sprngmvc的拦截器
	
	通过用户授权达到目标：
	没有权限的菜单在登录后不显示，如果用户直接输入菜单地址，提示误操作权限
	
12.系统中使用数据字典了吗？怎么用的？

13.系统中有导入导出功能吗？怎么实现的？

14.系统中包含哪些系统配置模块？

15.请描述药品目录模块？
	模块功能描述，本模块包括哪些功能？
	药品目录维护，卫生局通过批量导入，将市平台所用的药品目录信息导入系统，对药品信息进行修改、删除操作。
	供货商药品目录维护，供货商对自己供应的药品进行维护，供货商向供货商药品目录添加要供应的药品，删除不在供应的药品。
	供货商药品目控制，监督单位对供货商的药品目录进行控制，允许供货商供货或暂停供货商供货。
	
	业务流程：
	1.卫生局建立本系统的药品总目录。
	2.供货商从药品总目录挑选药品加入自己的供货商药品目录，表示供应商要供应该药品。
	3.供货商将药品从自己的供货商药品目录删除表示不再共应该药品。
	4.监督单位查询供货商供应的药品信息，对其的供应状态进行控制，允许供货商供货或暂停供货商供货

16.请描述采购单模块？
功能描述：医院创建采购单，监督单位审核采购单，供货商受理采购单，药品入库等功能

业务流程：
1.医院创建采购单
	填写采购单基本信息（采购单的基本信息，下单人姓名及联系方式，采购单编号，下单日期）
	维护采购单明细信息（指定采购单采购哪些药品）
2.医院提交采购单
3.监督单位审核采购单
4.供货商受理采购单
5.医院执行入库操作

17.你在开发中遇到哪些问题？是怎么解决的？
	系统中对采购单信息进行分表存储。
	为什么进行分表存储？因为对于一个省会城市每一年的采购单信息达到千万级，时间长了对采购单信息查询、统计的速度就会降低，
	单纯从数据库级别优化治标不治本，彻底的解决办法对数据进行分表存储。
	
	如何分表存储的？
	采购单包括两张表，采购单基本信息表和采购单药品明细表，其中采购单药品明细表数量很大，如果单纯对药品明细表分表，开发中采购单业务处理思路不统一，所以要对采购单两张表及表相关的对象全部进行分表。
	采用按年分表，表名命名规则：
	yycgd+4位年份
	yycgdmx+4位年份
	...等等表相关的对象也采用固定名称+4位年份
	
	分表操作方法：
	采用系统定时任务定时执行存储过程进行动态表创建。定时任务采用的是操作系统的定时任务，因为操作系统的定时任务稳定且是和软件是分开的，操作任务不仅仅有动态分表还有系统备份，临时文件清理。
	存储过程里边就是动态分表的逻辑，对采购单表，采购单明细表，统计分析表，退货单数据库对象进行创建。
	
	动态表如何创建：通过定时任务调用存储过程，存储过程创建动态表及相关的数据库对象。
	定时任务：采用才做系统的定时任务，通常java程序在Linux中运行，需要在/etc/crontab配置定时任务。
	创建方法：编写shell脚本，内容是链接数据库，调用存储过程。
	sqlplus yycg/yycg@_127.0.0.1@c:test.sql   sql内容：call create_tableJob();---调用存储过程

18.供货商如何进行采购单受理？
	功能描述:医院创建采购单并由监督单位受理通过后，由供货商进行受理，供货商根据医院采购药品数量等信息进行发货操作。
	
	选择确认发货：针对发货量少的药品可以采用选择确认发货方式，供货商登录系统查询待受理的发货清单，选择要发货的药品进行确认发货。
	
	批量发货：针对发货量大的药品，供货商将要发货的药品整理正excel文件，通过系统导入发货清单，清单中存在药品明细系统自动执行发货操作。

19.说说药品入库流程？
	药品入库功能描述：医院采购药品，供货商对采购药品进行发货后，医院执行入库操作，药品入库表示医院收到所采购的药品了。
	
	操作流程：
	医院登录系统查询待入库的药品明细信息，选择要入库药品，填写入库信息（入库量，发票号，药品批号，有效期），确认入库提交。

20.说说退货和结算流程？

	退货流程：
	1.医院创建退货单，填写退货单的基本信息，向退货单中加入要退货的药品，所加入的药品是以前采购的药品。
	2.提交退货单
	3.供货商受理退货单
	
	结算流程：
	1.医院创建结算单，填写结算单的基本信息，向结算单中加入要结算的药品，所加入的结算的药品是以前采购的药品。
	2.提交结算单
	3.供货商受理结算单

21.系统中有打印功能吗？怎么实现的？
	系统中有打印功能。
	导出的列表要打印，怎么实现？
	采购单信息打印，怎么实现？
	
	b/s系统下打印功能实现方式：
	1.使用浏览器的打印功能
	2.用户下载excel文件自行打印
	3.套打
	
22.你在开发中遇到什么问题？统计分析是如何开发的？
系统统计分析，有交易明细查询，有按药品，按医院等分类统计功能，按药品、按医院等分类统计是是在交易明细查询基础上进行统计分析，
问题是三张大数据量的表的关联查询，为了提高查询和统计性能，单独创建一个交易明细表。

将采购单信息，入库信息，退货信息，结算信息都聚合到交易明细表中。交易明细查询、分类统计都是从一个表（单表）进行统计查询，提高查询统计的性能。


23.你是如何和测试人员配合工作的？

系统测试过程：
开发人员将系统开发完成，首先进行系统集成测试
集成测试完成开发人员提供两个文档，“系统集成测试报告”，“系统部署配置说明”
将系统提交给测试人员

测试人员从SVN上下载所有代码及系统相关文档。
测试人员根据“系统集成测试报告”"系统部署配置说明"进行系统集成测试
测试人员集成测试通过，测试进行详细系统功能测试。
开发人员在测试人员进行详细功能测试时，需要长时间的（和开发时间相等甚至多于开发时间）进行缺陷修改。
缺陷修改过程：
测试人员进行功能测试，测试出来的bug提交到专门的项目管理平台（测试管理平台是项目管理平台的一部分）
	提交的bug时并没有指定修改bug的程序员，指定给了项目经理。
	

24.你参与过系统维护吗？系统维护流程？

25.java的内存大小设置？在启动Tomcat是对内存大小进行设置

26.DispatcherServlet的处理流程